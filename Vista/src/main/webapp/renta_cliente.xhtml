<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>EVENTOS CAMPESTRE — Renta</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/primeicons@6.0.1/primeicons.css"/>

    <style type="text/css">
        /*<![CDATA[*/
        :root{
            --olive:#3f4737;
            --paper:#ffffff;
            --ink:#1d1d1b;
            --muted:#c5c8c0;
            --beige:#e8dfd3;
            --black:#0d0d0d;
            --white:#ffffff;
            --brown-lines:#9c8e80;
            --lightGray-bg:#c5c7c8;
        }
        *{ box-sizing:border-box; }
        html, body{ height:100%; }
        body{
            margin:0;
            font-family:"Minerva Modern", serif;
            color:var(--ink);
            background:var(--paper);
            padding-top:110px;
        }
        .layout{ min-height:100vh; display:flex; flex-direction:column; }

        /* === TOPBAR TOMADO DE CARRITO === */
        .topbar {
            background-color: var(--olive);
            color: var(--white);
            padding: 15px 40px 10px 40px;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.15);
            transition: padding 0.25s ease, box-shadow 0.25s ease;
        }

        .tb-row1 {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
        }

        .tb-left {
            display: flex;
            gap: 15px;
        }

        .tb-left i {
            font-size: 1.2rem;
            color: var(--white);
            opacity: 0.9;
            cursor: pointer;
        }

        .tb-brand {
            text-align: center;
            font-style: italic;
            font-weight: 400;
            font-size: 2rem;
            letter-spacing: 0.05em;
            transition: font-size 0.25s ease;
        }

        .tb-brand a {
            color: var(--white);
            text-decoration: none;
        }

        .tb-right {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 10px;
        }

        .tb-count {
            font-size: 1.15rem;
            font-style: italic;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        .tb-row2 {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-top: 15px;
            font-style: italic;
            font-size: 1.1rem;
            transition: margin-top 0.25s ease, gap 0.25s ease, font-size 0.25s ease;
        }
        .tb-row2 a {
            color: var(--white);
            text-decoration: none;
            opacity: 0.9;
        }
        .tb-row2 a:hover{
            opacity:1;
            text-decoration:underline;
        }

        /* Estado reducido al hacer scroll */
        .topbar.topbar--shrink {
            padding: 6px 30px 4px 30px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.25);
        }
        .topbar.topbar--shrink .tb-brand {
            font-size: 1.5rem;
        }
        .topbar.topbar--shrink .tb-row2 {
            margin-top: 6px;
            gap: 40px;
            font-size: 1rem;
        }

        .brand-strip{
            background:#fff;
            border-bottom:1px solid #eee;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:22px 18px;
        }
        .hero{ width:100%; overflow:hidden; }
        .hero__bg{ max-height:520px; height:52vw; min-height:280px; }
        .hero__bg img{ width:100%; height:100%; object-fit:cover; display:block; }

        /* Carrusel */
        .work{ background:#fff; padding:28px 0 44px; }
        .container{ max-width:1100px; margin:0 auto; padding:0 18px; }
        .title{ display:inline-block; background:var(--olive); color:#fff; padding:12px 16px; margin:0; font-weight:700; letter-spacing:.04em; }
        .work-title{ background:#fff; color:var(--olive); }

        /* Paquetes */
        .packages{ background:var(--olive); padding:28px 0 44px; color:#fff; }
        .packages .title{ background:transparent; color:#fff; border:1px solid rgba(255,255,255,.6); }
        .packages-grid{ display:grid; grid-template-columns:repeat(4, 1fr); gap:28px; margin-top:18px; }
        .pkg-card{ background:#fff; color:#1d1d1b; border-radius:6px; overflow:hidden; height:auto; display:flex; flex-direction:column; }
        .pkg-img{ width:100%; height:180px; object-fit:cover; display:block; }
        .pkg-body{ padding:12px 12px 14px; }
        .pkg-name{ font-weight:700; margin-bottom:6px; }
        .pkg-list{ font-size:.9rem; color:#333; line-height:1.3; }
        .pkg-price{ margin:12px 0; font-weight:700; }
        .pkg-btn{ background:#000 !important; color:#fff !important; border:none !important; padding:10px 16px; cursor:pointer; display:inline-block; }
        .pkg-btn:hover{ background:#222 !important; }
        .pkg-btn.ui-button{ background:#000 !important; border:none !important; color:#fff !important; }
        .pkg-btn.ui-button .ui-button-text{ color:#fff !important; }

        /* Botón CTA unificado (preview + footer) */
        .cta-btn{ background:#000 !important; border:1px solid #000 !important; color:#fff !important; }
        .cta-btn:hover{ background:#222 !important; border-color:#222 !important; }
        @media (max-width:1100px){ .packages-grid{ grid-template-columns:repeat(2, 1fr);} }
        @media (max-width:640px){ .packages-grid{ grid-template-columns:1fr;} }

        /* Catálogo 3 columnas */
        .grid-3{ display:grid; grid-template-columns: 250px 1fr 260px; gap:22px; }

        /* === Sidebar catálogo === */
        .catalog-left{ max-height:72vh; overflow-y:auto; padding-right:4px; }
        .catalog-left::-webkit-scrollbar{ width:6px; }
        .catalog-left::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.25); border-radius:4px; }

        .catalog-section{ margin-bottom:18px; }
        .catalog-section .thumb-title{ font-weight:600; margin-bottom:8px; }

        .catalog-grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap:10px; }

        .catalog-item{ border:1px solid #e3e3e3; border-radius:8px; background:#fff; overflow:hidden; text-align:center; transition:box-shadow .15s ease; }
        .catalog-item:hover{ box-shadow:0 2px 8px rgba(0,0,0,.12); }
        .catalog-item img{ width:100%; height:90px; object-fit:cover; display:block; }
        .catalog-item .thumb-caption{ font-size:.7rem; padding:6px 4px 8px; line-height:1.2; }

        .panel-shadow{ box-shadow:0 2px 8px rgba(0,0,0,.08); border-radius:8px; }

        .preview-meta{ display:flex; justify-content:space-between; align-items:center; padding:10px 8px 0; font-size:1rem; }
        .preview-name{ font-weight:700; }
        .preview-price{ font-weight:700; }
        .add-bar{ display:flex; gap:12px; align-items:center; justify-content:center; margin-top:10px; }
        .stock-note{ font-size:.85rem; color:#666; margin-left:4px; }

        .footer{ background:var(--olive); color:#e9eadf; display:grid; grid-template-columns:1fr auto 1fr; gap:26px; align-items:center; padding:22px 18px; margin-top:auto; }
        .footer__right{ text-align:right; }

        @media (max-width:1100px){
            .grid-3{ grid-template-columns:1fr; }
            .footer{ grid-template-columns:1fr; text-align:center; }
            .footer__right{ text-align:center; }
            .catalog-left{ max-height:none; overflow:visible; }
        }

        #formRenta .ui-selectonemenu,
        #formRenta .ui-selectonemenu .ui-selectonemenu-trigger,
        #formRenta .ui-selectonemenu .ui-selectonemenu-label{ background-color:#ffffff !important; border:1px solid #ccc !important; }
        #formRenta .ui-selectonemenu-panel, #formRenta .ui-selectonemenu-panel .ui-selectonemenu-items{ background-color:#ffffff !important; }
        #formRenta .ui-selectonemenu-panel .ui-selectonemenu-item{ background-color:#ffffff !important; color:#000000 !important; }
        #formRenta .ui-selectonemenu-panel .ui-selectonemenu-item:hover{ background-color:#f0f0f0 !important; }
        #formRenta .ui-selectonemenu{ width:100%; }

        /* Estilo para el aviso de fecha */
        .date-info-bar { background-color: #fdfcdc; border-bottom: 1px solid #e0dca0; color: #4f4f4f; padding: 10px; text-align: center; margin-bottom: 15px; border-radius: 4px; }

        /* === ESTILOS PERSONALIZADOS PARA EL DIALOGO DE FECHA === */
        .custom-dialog .ui-dialog-titlebar { background-color: var(--olive) !important; color: #ffffff !important; border: none !important; padding: 15px 20px !important; border-top-left-radius: 8px !important; border-top-right-radius: 8px !important; }
        .custom-dialog .ui-dialog-title { font-weight: 600 !important; font-size: 1.2rem !important; }
        .custom-dialog .ui-dialog-titlebar-close { display: none !important; }
        .custom-dialog .ui-dialog-content { background-color: var(--beige) !important; color: var(--ink) !important; border: none !important; padding: 25px 20px !important; border-bottom-left-radius: 8px !important; border-bottom-right-radius: 8px !important; }

        /* Centrar el DatePicker */
        .center-calendar .ui-calendar { width: 100% !important; display: flex !important; justify-content: center !important; }
        .center-calendar .ui-calendar input { width: 200px !important; text-align: center !important; }

        /* Botón del diálogo */
        .dialog-btn { background: #000 !important; border: 1px solid #000 !important; color: #fff !important; padding: 10px 20px !important; font-weight: 600 !important; width: auto !important; margin-top: 10px !important; }
        .dialog-btn:hover { background: #222 !important; border-color: #222 !important; }

        /* === ESTILOS NUEVOS PARA PREVIEW APILADO === */
        .preview-stack { display: flex; flex-direction: column; width: 100%; padding: 10px 10px 0; font-size: 1rem; }
        .preview-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; padding-bottom: 4px; border-bottom: 1px dashed #eee; }
        .preview-row:last-child { border-bottom: none; margin-bottom: 0; }
        .preview-row.main-item { font-weight: 700; color: #1d1d1b; }
        .preview-row.sub-item { color: #555; font-size: 0.9em; padding-left: 10px; }

        .p-name { display:flex; align-items:center; gap:6px; }
        .p-info { display: flex; align-items: center; gap: 10px; }
        .p-stock { font-size: 0.8em; color: #777; background: #f0f0f0; padding: 2px 6px; border-radius: 4px; }
        .p-price { font-weight: 600; }

        /* === ESTILOS MODAL CARRITO === */
        .custom-cart-modal.ui-dialog {
            position: fixed !important;
            top: 75px !important;
            right: 40px !important;
            left: auto !important;
            transform: none !important;
            box-shadow: 0 5px 30px rgba(0,0,0,0.15) !important;
            z-index: 1001 !important;
        }
        .ui-dialog {
            border: none !important;
            border-radius: 0 !important;
        }
        .ui-dialog .ui-dialog-titlebar {
            background-color: var(--olive) !important;
            color: var(--white) !important;
            border: none !important;
            border-radius: 0 !important;
            padding: 10px 15px !important;
        }
        .ui-dialog .ui-dialog-titlebar-icon {
            color: var(--white) !important;
        }
        .ui-dialog .ui-dialog-content {
            background-color: var(--beige) !important;
            padding: 0 !important;
            color: var(--black);
        }

        .modal-cart-content {
            padding: 15px 20px;
        }
        .modal-item-row {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--brown-lines);
            gap: 10px;
        }
        .modal-btn-remove {
            color: var(--black);
            opacity: 0.6;
            transition: opacity 0.3s;
            text-decoration: none;
        }
        .modal-btn-remove:hover { opacity: 1; }
        .modal-item-img {
            width: 40px; height: 40px;
            object-fit: cover;
            border: 1px solid #ccc;
        }
        .modal-item-img.placeholder { background-color: var(--white); }
        .modal-item-name {
            flex: 1;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .modal-qty-selector {
            display: flex;
            align-items: center;
            background-color: var(--lightGray-bg);
            border: 1px solid var(--black);
            padding: 2px 5px;
            gap: 8px;
        }
        .modal-qty-selector .ui-inputnumber,
        .modal-qty-selector .ui-inputnumber input {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            width: 40px !important;
            text-align: center;
        }
        .modal-qty-val {
            font-weight: 700;
            min-width: 15px;
            text-align: center;
            font-size: 0.9rem;
        }
        .modal-qty-selector a {
            color: var(--black);
            text-decoration: none;
            display: flex;
        }
        .modal-item-price {
            font-weight: 600;
            min-width: 60px;
            text-align: right;
            font-size: 0.95rem;
        }
        .modal-general-alert {
            background-color: #fff3cd;
            color: #856404;
            padding: 8px 12px;
            margin-bottom: 10px;
            border: 1px solid #ffeeba;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        /*]]>*/
    </style>

    <!-- Script para hacer shrink del topbar al hacer scroll -->
    <script type="text/javascript">
        window.addEventListener('DOMContentLoaded', function () {
            var topbar = document.querySelector('.topbar');
            if (!topbar) return;

            var shrinkOffset = 120;

            window.addEventListener('scroll', function () {
                if (window.scrollY > shrinkOffset) {
                    topbar.classList.add('topbar--shrink');
                } else {
                    topbar.classList.remove('topbar--shrink');
                }
            });
        });
    </script>
</h:head>

<h:body>
    <h:form id="formRenta">

        <div class="layout">

            <!-- TOPBAR -->
            <header class="topbar">
                <div class="tb-row1">
                    <div class="tb-left">
                        <a href="https://www.facebook.com/cositastanbellas?locale=es_LA" class="tb-icon"><i class="pi pi-facebook"/></a>
                        <a href="https://w.app/eventoscampestre" class="tb-icon"><i class="pi pi-whatsapp"/></a>
                        <a href="principal_cliente.xhtml" class="tb-icon" title="Inicio">
                            <i class="pi pi-home"/>
                        </a>
                    </div>
                    <div class="tb-brand">
                        <a href="principal_cliente.xhtml">EVENTOS CAMPESTRE</a>
                    </div>
                    <div class="tb-right">
                        <p:commandLink onclick="PF('carritoModal').show(); return false;"
                                       style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <i class="pi pi-shopping-cart" style="font-size: 1.4rem;"/>
                            <h:panelGroup id="tb-count-group">
                                <span class="tb-count">#{carritoBean.carrito.conteoTotalItems}</span>
                            </h:panelGroup>
                        </p:commandLink>
                    </div>
                </div>
                <nav class="tb-row2">
                    <a href="acercaDe.xhtml">Acerca de</a>
                    <a href="renta_cliente.xhtml">Renta</a>
                    <a href="contacto.xhtml">Contacto</a>
                </nav>
            </header>

            <!-- LOGO -->
            <section class="brand-strip">
                <h:graphicImage library="img" name="logo-eventos-campestre.webp" alt="Eventos Campestre"/>
            </section>

            <!-- HERO -->
            <section class="hero">
                <div class="hero__bg">
                    <h:graphicImage library="img" name="hero-jardin.png" alt="Jardín con mesas" />
                </div>
            </section>

            <!-- PAQUETES -->
            <section class="packages">
                <div class="container">
                    <h2 class="title">Paquetes</h2>
                    <div class="packages-grid">
                        <div class="pkg-card panel-shadow">
                            <h:graphicImage library="img" name="trabajo-1.png" alt="Juego redonda garden" styleClass="pkg-img"/>
                            <div class="pkg-body">
                                <div class="pkg-name">Juego redonda garden</div>
                                <div class="pkg-list">Mesa redonda *1</div>
                                <div class="pkg-list">Sillas garden *10</div>
                                <div class="pkg-price">$350.00</div>
                                <p:commandButton value="Agregar al carrito"
                                                 styleClass="pkg-btn"
                                                 process="@this"
                                                 actionListener="#{articuloCatalogoUI.agregarPaqueteRedondaGarden}"
                                                 update=":formRenta:msgs :formRenta:tb-count-group :formRenta:modalCarritoContent"/>
                            </div>
                        </div>
                        <div class="pkg-card panel-shadow">
                            <h:graphicImage library="img" name="trabajo-2.png" alt="Juego rectangular garden" styleClass="pkg-img"/>
                            <div class="pkg-body">
                                <div class="pkg-name">Juego rectangular garden</div>
                                <div class="pkg-list">Mesa rectangular *1</div>
                                <div class="pkg-list">Sillas garden *8</div>
                                <div class="pkg-price">$300.00</div>
                                <p:commandButton value="Agregar al carrito"
                                                 styleClass="pkg-btn"
                                                 process="@this"
                                                 actionListener="#{articuloCatalogoUI.agregarPaqueteRectGarden}"
                                                 update=":formRenta:msgs :formRenta:tb-count-group :formRenta:modalCarritoContent"/>
                            </div>
                        </div>
                        <div class="pkg-card panel-shadow">
                            <h:graphicImage library="img" name="trabajo-3.png" alt="Juego rectangular" styleClass="pkg-img"/>
                            <div class="pkg-body">
                                <div class="pkg-name">Juego rectangular</div>
                                <div class="pkg-list">Mesa rectangular *1</div>
                                <div class="pkg-list">Sillas lifetime *8</div>
                                <div class="pkg-price">$200.00</div>
                                <p:commandButton value="Agregar al carrito"
                                                 styleClass="pkg-btn"
                                                 process="@this"
                                                 actionListener="#{articuloCatalogoUI.agregarPaqueteRectLifetime}"
                                                 update=":formRenta:msgs :formRenta:tb-count-group :formRenta:modalCarritoContent"/>
                            </div>
                        </div>
                        <div class="pkg-card panel-shadow">
                            <h:graphicImage library="img" name="trabajo-1.png" alt="Juego redonda" styleClass="pkg-img"/>
                            <div class="pkg-body">
                                <div class="pkg-name">Juego redonda</div>
                                <div class="pkg-list">Mesa redonda *1</div>
                                <div class="pkg-list">Sillas lifetime *10</div>
                                <div class="pkg-price">$250.00</div>
                                <p:commandButton value="Agregar al carrito"
                                                 styleClass="pkg-btn"
                                                 process="@this"
                                                 actionListener="#{articuloCatalogoUI.agregarPaqueteRedondaLifetime}"
                                                 update=":formRenta:msgs :formRenta:tb-count-group :formRenta:modalCarritoContent"/>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CATALOGO -->
            <section class="work" id="catalogo" style="padding-top:10px;">
                <div class="container">
                    <h2 class="title work-title">Catálogo</h2>

                    <p:messages id="msgs" showDetail="true" closable="true" />

                    <h:panelGroup id="barraFecha" rendered="#{not empty articuloCatalogoUI.fechaSeleccionada}">
                        <div class="date-info-bar">
                            <i class="pi pi-calendar" style="margin-right:6px;"></i>
                            Reservando para el: <strong>
                            <h:outputText value="#{articuloCatalogoUI.fechaSeleccionada}">
                                <f:convertDateTime pattern="dd/MM/yyyy" type="localDate"/>
                            </h:outputText>
                        </strong>
                        </div>
                    </h:panelGroup>

                    <p:remoteCommand name="rcMesaCombinacion"
                                     actionListener="#{combinacionMesaClienteUI.onMesaSeleccion}"
                                     process="@this"
                                     update=":formRenta:panelDerecha :formRenta:preview" />

                    <h:panelGroup id="catalogoPrincipal" layout="block">

                        <h:panelGroup rendered="#{empty articuloCatalogoUI.fechaSeleccionada}" style="text-align:center; display:block; padding:40px; background:#f9f9f9; border-radius:8px;">
                            <i class="pi pi-calendar-times" style="font-size: 3rem; color: var(--muted); margin-bottom: 15px;"></i>
                            <h3 style="color: #555;">Por favor, selecciona una fecha para ver la disponibilidad.</h3>
                            <p:commandButton value="Seleccionar Fecha" onclick="PF('dlgFecha').show()" type="button" icon="pi pi-calendar" styleClass="cta-btn"/>
                        </h:panelGroup>

                        <h:panelGroup rendered="#{not empty articuloCatalogoUI.fechaSeleccionada}" styleClass="grid-3" style="margin-top:18px;">

                            <div class="catalog-left">
                                <h3 style="margin:0 0 10px;">Mobiliario</h3>

                                <h:panelGroup layout="block" styleClass="catalog-section" rendered="#{not empty articuloCatalogoUI.mesasRedondas}">
                                    <div class="thumb-title">Mesas redondas</div>
                                    <div class="catalog-grid">
                                        <ui:repeat value="#{articuloCatalogoUI.mesasRedondas}" var="mR">
                                            <p:commandLink process="@this"
                                                           update=":formRenta:preview :formRenta:barraAgregar :formRenta:msgs"
                                                           actionListener="#{articuloCatalogoUI.ver(mR)}"
                                                           oncomplete="rcMesaCombinacion([{name:'mesaId', value:'#{mR.id}'}]);"
                                                           styleClass="catalog-item">
                                                <h:panelGroup rendered="#{not empty mR.imagenDataUrl}">
                                                    <h:graphicImage value="#{mR.imagenDataUrl}" alt="#{mR.nombre}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{empty mR.imagenDataUrl}">
                                                    <div style="width:100%;height:90px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#777;">Sin imagen</div>
                                                </h:panelGroup>
                                                <div class="thumb-caption">#{mR.nombre}</div>
                                            </p:commandLink>
                                        </ui:repeat>
                                    </div>
                                </h:panelGroup>

                                <h:panelGroup layout="block" styleClass="catalog-section" rendered="#{not empty articuloCatalogoUI.mesasRectangulares}">
                                    <div class="thumb-title">Mesas rectangulares</div>
                                    <div class="catalog-grid">
                                        <ui:repeat value="#{articuloCatalogoUI.mesasRectangulares}" var="mRec">
                                            <p:commandLink process="@this"
                                                           update=":formRenta:preview :formRenta:barraAgregar :formRenta:msgs"
                                                           actionListener="#{articuloCatalogoUI.ver(mRec)}"
                                                           oncomplete="rcMesaCombinacion([{name:'mesaId', value:'#{mRec.id}'}]);"
                                                           styleClass="catalog-item">
                                                <h:panelGroup rendered="#{not empty mRec.imagenDataUrl}">
                                                    <h:graphicImage value="#{mRec.imagenDataUrl}" alt="#{mRec.nombre}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{empty mRec.imagenDataUrl}">
                                                    <div style="width:100%;height:90px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#777;">Sin imagen</div>
                                                </h:panelGroup>
                                                <div class="thumb-caption">#{mRec.nombre}</div>
                                            </p:commandLink>
                                        </ui:repeat>
                                    </div>
                                </h:panelGroup>

                                <h:panelGroup layout="block" styleClass="catalog-section" rendered="#{not empty articuloCatalogoUI.sillasGarden}">
                                    <div class="thumb-title">Sillas Garden</div>
                                    <div class="catalog-grid">
                                        <ui:repeat value="#{articuloCatalogoUI.sillasGarden}" var="sG">
                                            <p:commandLink process="@this" update=":formRenta:preview :formRenta:barraAgregar :formRenta:msgs"
                                                           actionListener="#{articuloCatalogoUI.ver(sG)}" styleClass="catalog-item">
                                                <h:panelGroup rendered="#{not empty sG.imagenDataUrl}">
                                                    <h:graphicImage value="#{sG.imagenDataUrl}" alt="#{sG.nombre}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{empty sG.imagenDataUrl}">
                                                    <div style="width:100%;height:90px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#777;">Sin imagen</div>
                                                </h:panelGroup>
                                                <div class="thumb-caption">#{sG.nombre}</div>
                                            </p:commandLink>
                                        </ui:repeat>
                                    </div>
                                </h:panelGroup>

                                <h:panelGroup layout="block" styleClass="catalog-section" rendered="#{not empty articuloCatalogoUI.sillasLifetime}">
                                    <div class="thumb-title">Sillas Lifetime</div>
                                    <div class="catalog-grid">
                                        <ui:repeat value="#{articuloCatalogoUI.sillasLifetime}" var="sL">
                                            <p:commandLink process="@this" update=":formRenta:preview :formRenta:barraAgregar :formRenta:msgs"
                                                           actionListener="#{articuloCatalogoUI.ver(sL)}" styleClass="catalog-item">
                                                <h:panelGroup rendered="#{not empty sL.imagenDataUrl}">
                                                    <h:graphicImage value="#{sL.imagenDataUrl}" alt="#{sL.nombre}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{empty sL.imagenDataUrl}">
                                                    <div style="width:100%;height:90px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#777;">Sin imagen</div>
                                                </h:panelGroup>
                                                <div class="thumb-caption">#{sL.nombre}</div>
                                            </p:commandLink>
                                        </ui:repeat>
                                    </div>
                                </h:panelGroup>

                                <h:panelGroup layout="block" styleClass="catalog-section" rendered="#{not empty articuloCatalogoUI.carpasChicas}">
                                    <div class="thumb-title">Carpas (chicas)</div>
                                    <div class="catalog-grid">
                                        <ui:repeat value="#{articuloCatalogoUI.carpasChicas}" var="cCh">
                                            <p:commandLink process="@this" update=":formRenta:preview :formRenta:barraAgregar :formRenta:msgs"
                                                           actionListener="#{articuloCatalogoUI.ver(cCh)}" styleClass="catalog-item">
                                                <h:panelGroup rendered="#{not empty cCh.imagenDataUrl}">
                                                    <h:graphicImage value="#{cCh.imagenDataUrl}" alt="#{cCh.nombre}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{empty cCh.imagenDataUrl}">
                                                    <div style="width:100%;height:90px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#777;">Sin imagen</div>
                                                </h:panelGroup>
                                                <div class="thumb-caption">#{cCh.nombre}</div>
                                            </p:commandLink>
                                        </ui:repeat>
                                    </div>
                                </h:panelGroup>

                                <h:panelGroup layout="block" styleClass="catalog-section" rendered="#{not empty articuloCatalogoUI.carpasGrandes}">
                                    <div class="thumb-title">Carpas (grandes)</div>
                                    <div class="catalog-grid">
                                        <ui:repeat value="#{articuloCatalogoUI.carpasGrandes}" var="cGr">
                                            <p:commandLink process="@this" update=":formRenta:preview :formRenta:barraAgregar :formRenta:msgs"
                                                           actionListener="#{articuloCatalogoUI.ver(cGr)}" styleClass="catalog-item">
                                                <h:panelGroup rendered="#{not empty cGr.imagenDataUrl}">
                                                    <h:graphicImage value="#{cGr.imagenDataUrl}" alt="#{cGr.nombre}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{empty cGr.imagenDataUrl}">
                                                    <div style="width:100%;height:90px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#777;">Sin imagen</div>
                                                </h:panelGroup>
                                                <div class="thumb-caption">#{cGr.nombre}</div>
                                            </p:commandLink>
                                        </ui:repeat>
                                    </div>
                                </h:panelGroup>

                                <h:panelGroup layout="block" styleClass="catalog-section" rendered="#{not empty articuloCatalogoUI.coolers}">
                                    <div class="thumb-title">Coolers</div>
                                    <div class="catalog-grid">
                                        <ui:repeat value="#{articuloCatalogoUI.coolers}" var="cool">
                                            <p:commandLink process="@this" update=":formRenta:preview :formRenta:barraAgregar :formRenta:msgs"
                                                           actionListener="#{articuloCatalogoUI.ver(cool)}" styleClass="catalog-item">
                                                <h:panelGroup rendered="#{not empty cool.imagenDataUrl}">
                                                    <h:graphicImage value="#{cool.imagenDataUrl}" alt="#{cool.nombre}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{empty cool.imagenDataUrl}">
                                                    <div style="width:100%;height:90px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#777;">Sin imagen</div>
                                                </h:panelGroup>
                                                <div class="thumb-caption">#{cool.nombre}</div>
                                            </p:commandLink>
                                        </ui:repeat>
                                    </div>
                                </h:panelGroup>

                                <h:panelGroup layout="block" styleClass="catalog-section" rendered="#{not empty articuloCatalogoUI.calentones}">
                                    <div class="thumb-title">Calentones</div>
                                    <div class="catalog-grid">
                                        <ui:repeat value="#{articuloCatalogoUI.calentones}" var="cal">
                                            <p:commandLink process="@this" update=":formRenta:preview :formRenta:barraAgregar :formRenta:msgs"
                                                           actionListener="#{articuloCatalogoUI.ver(cal)}" styleClass="catalog-item">
                                                <h:panelGroup rendered="#{not empty cal.imagenDataUrl}">
                                                    <h:graphicImage value="#{cal.imagenDataUrl}" alt="#{cal.nombre}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{empty cal.imagenDataUrl}">
                                                    <div style="width:100%;height:90px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#777;">Sin imagen</div>
                                                </h:panelGroup>
                                                <div class="thumb-caption">#{cal.nombre}</div>
                                            </p:commandLink>
                                        </ui:repeat>
                                    </div>
                                </h:panelGroup>
                            </div>

                            <div>
                                <p:panel styleClass="panel-shadow">
                                    <f:facet name="header">
                                        <div style="display:flex; justify-content:space-between; align-items:center; width:100%;">
                                            <span>Vista previa</span>
                                            <p:commandLink onclick="PF('dlgFecha').show()" process="@this" title="Cambiar fecha del evento" style="text-decoration:none;">
                                                <i class="pi pi-calendar" style="font-size: 1.2rem; color: var(--olive); cursor: pointer;" onmouseover="this.style.color='#1d1d1b'" onmouseout="this.style.color='var(--olive)'"></i>
                                            </p:commandLink>
                                        </div>
                                    </f:facet>

                                    <h:panelGroup id="preview">

                                        <h:panelGroup rendered="#{not empty combinacionMesaClienteUI.imagenPreview}">
                                            <h:graphicImage value="#{combinacionMesaClienteUI.imagenPreview}"
                                                            style="width:100%;min-height:430px;background:#e5e5e5;border-radius:6px;object-fit:contain;display:block"/>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{empty combinacionMesaClienteUI.imagenPreview}">
                                            <h:panelGroup rendered="#{not empty articuloCatalogoUI.seleccionado and not empty articuloCatalogoUI.seleccionado.imagenDataUrl}">
                                                <h:graphicImage value="#{articuloCatalogoUI.seleccionado.imagenDataUrl}"
                                                                style="width:100%;min-height:430px;background:#e5e5e5;border-radius:6px;object-fit:contain;display:block"/>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{empty articuloCatalogoUI.seleccionado or empty articuloCatalogoUI.seleccionado.imagenDataUrl}">
                                                <div style="width:100%;min-height:430px;background:#e5e5e5;border-radius:6px;display:flex;align-items:center;justify-content:center;color:#666;">
                                                    Selecciona un artículo para previsualizarlo
                                                </div>
                                            </h:panelGroup>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{not empty articuloCatalogoUI.seleccionado}">
                                            <div class="preview-stack">

                                                <div class="preview-row main-item">
                                                    <div class="p-name">#{articuloCatalogoUI.seleccionado.nombre}</div>
                                                    <div class="p-info">
                                                        <span class="p-stock">Disp: #{articuloCatalogoUI.seleccionado.unidades}</span>
                                                        <span class="p-price">
                                                            <h:outputText value="#{articuloCatalogoUI.seleccionado.precio}">
                                                                <f:convertNumber type="currency" currencySymbol="$" locale="es_MX"/>
                                                            </h:outputText>
                                                        </span>
                                                    </div>
                                                </div>

                                                <h:panelGroup rendered="#{not empty combinacionMesaClienteUI.mantelId}">
                                                    <ui:param name="dtoMantel" value="#{articuloCatalogoUI.buscarPorId(combinacionMesaClienteUI.mantelId)}" />
                                                    <h:panelGroup rendered="#{not empty dtoMantel}">
                                                        <div class="preview-row sub-item">
                                                            <div class="p-name"><i class="pi pi-angle-right"></i> #{dtoMantel.nombre}</div>
                                                            <div class="p-info">
                                                                <span class="p-stock">Disp: #{dtoMantel.unidades}</span>
                                                                <span class="p-price">
                                                                    <h:outputText value="#{dtoMantel.precio}">
                                                                        <f:convertNumber type="currency" currencySymbol="$" locale="es_MX"/>
                                                                    </h:outputText>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </h:panelGroup>
                                                </h:panelGroup>

                                                <h:panelGroup rendered="#{not empty combinacionMesaClienteUI.caminoId}">
                                                    <ui:param name="dtoCamino" value="#{articuloCatalogoUI.buscarPorId(combinacionMesaClienteUI.caminoId)}" />
                                                    <h:panelGroup rendered="#{not empty dtoCamino}">
                                                        <div class="preview-row sub-item">
                                                            <div class="p-name"><i class="pi pi-angle-right"></i> #{dtoCamino.nombre}</div>
                                                            <div class="p-info">
                                                                <span class="p-stock">Disp: #{dtoCamino.unidades}</span>
                                                                <span class="p-price">
                                                                    <h:outputText value="#{dtoCamino.precio}">
                                                                        <f:convertNumber type="currency" currencySymbol="$" locale="es_MX"/>
                                                                    </h:outputText>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </h:panelGroup>
                                                </h:panelGroup>

                                                <h:panelGroup rendered="#{not empty combinacionMesaClienteUI.cubreId}">
                                                    <ui:param name="dtoCubre" value="#{articuloCatalogoUI.buscarPorId(combinacionMesaClienteUI.cubreId)}" />
                                                    <h:panelGroup rendered="#{not empty dtoCubre}">
                                                        <div class="preview-row sub-item">
                                                            <div class="p-name"><i class="pi pi-angle-right"></i> #{dtoCubre.nombre}</div>
                                                            <div class="p-info">
                                                                <span class="p-stock">Disp: #{dtoCubre.unidades}</span>
                                                                <span class="p-price">
                                                                    <h:outputText value="#{dtoCubre.precio}">
                                                                        <f:convertNumber type="currency" currencySymbol="$" locale="es_MX"/>
                                                                    </h:outputText>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </h:panelGroup>
                                                </h:panelGroup>

                                            </div>
                                        </h:panelGroup>

                                    </h:panelGroup>
                                </p:panel>

                                <p:outputPanel id="barraAgregar" style="margin-top:10px;text-align:center;">
                                    <h:panelGroup rendered="#{not empty articuloCatalogoUI.seleccionado}">
                                        <div class="add-bar">
                                            <div>
                                                <p:inputNumber id="qty"
                                                               value="#{articuloCatalogoUI.cantidad}"
                                                               decimalPlaces="0"
                                                               minValue="1"
                                                               maxValue="#{articuloCatalogoUI.maxCantidad}"
                                                               disabled="#{articuloCatalogoUI.agregarDeshabilitado}"
                                                               style="width:120px"/>
                                                <span class="stock-note">Disponibles: #{articuloCatalogoUI.maxCantidad}</span>
                                            </div>

                                            <p:commandButton value="#{articuloCatalogoUI.maxCantidad eq 0 ? 'Agotado' : 'Agregar'}"
                                                             styleClass="p-button-lg cta-btn"
                                                             process=":formRenta:barraAgregar :formRenta:qty"
                                                             actionListener="#{articuloCatalogoUI.agregarSeleccion}"
                                                             disabled="#{articuloCatalogoUI.agregarDeshabilitado}"
                                                             update=":formRenta:msgs :formRenta:tb-count-group :formRenta:modalCarritoContent"/>
                                        </div>
                                    </h:panelGroup>
                                </p:outputPanel>
                            </div>

                            <!-- DERECHA: Textiles + combinación -->
                            <p:outputPanel id="panelDerecha">
                                <p:panel header="Textiles" styleClass="panel-shadow">

                                    <h:panelGroup rendered="#{empty combinacionMesaClienteUI.mesaId}">
                                        <div style="font-size:.9rem;color:#666;">
                                            Selecciona una <strong>mesa</strong> del catálogo (izquierda) para ver
                                            los manteles y extras disponibles.
                                        </div>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{not empty combinacionMesaClienteUI.mesaId}">

                                        <h:panelGroup layout="block" style="margin-bottom:10px;">
                                            <p:outputLabel for="mantelSel" value="Mantel:" style="display:block;margin-bottom:4px;" />
                                            <p:selectOneMenu id="mantelSel" value="#{combinacionMesaClienteUI.mantelId}">
                                                <f:selectItem itemLabel="-- Seleccione mantel --" itemValue="#{null}" />
                                                <f:selectItems value="#{combinacionMesaClienteUI.mantelesDisponibles}" var="mt" itemLabel="#{mt.nombre}" itemValue="#{mt.id}" />
                                                <p:ajax process="@this" listener="#{combinacionMesaClienteUI.onMantelChange}" update=":formRenta:panelDerecha :formRenta:preview" />
                                            </p:selectOneMenu>
                                        </h:panelGroup>

                                        <h:panelGroup layout="block" style="margin-bottom:10px;">
                                            <p:outputLabel for="caminoSel" value="Camino (opcional):" style="display:block;margin-bottom:4px;" />
                                            <p:selectOneMenu id="caminoSel" value="#{combinacionMesaClienteUI.caminoId}" disabled="#{empty combinacionMesaClienteUI.mantelId or not empty combinacionMesaClienteUI.cubreId}">
                                                <f:selectItem itemLabel="-- Ninguno --" itemValue="#{null}" />
                                                <f:selectItems value="#{combinacionMesaClienteUI.caminosDisponibles}" var="cm" itemLabel="#{cm.nombre}" itemValue="#{cm.id}" />
                                                <p:ajax process="@this" listener="#{combinacionMesaClienteUI.onCaminoChange}" update=":formRenta:panelDerecha :formRenta:preview" />
                                            </p:selectOneMenu>
                                        </h:panelGroup>

                                        <h:panelGroup layout="block">
                                            <p:outputLabel for="cubreSel" value="Cubremantel (opcional):" style="display:block;margin-bottom:4px;" />
                                            <p:selectOneMenu id="cubreSel" value="#{combinacionMesaClienteUI.cubreId}" disabled="#{empty combinacionMesaClienteUI.mantelId or not empty combinacionMesaClienteUI.caminoId}">
                                                <f:selectItem itemLabel="-- Ninguno --" itemValue="#{null}" />
                                                <f:selectItems value="#{combinacionMesaClienteUI.cubresDisponibles}" var="cb" itemLabel="#{cb.nombre}" itemValue="#{cb.id}" />
                                                <p:ajax process="@this" listener="#{combinacionMesaClienteUI.onCubreChange}" update=":formRenta:panelDerecha :formRenta:preview" />
                                            </p:selectOneMenu>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{empty combinacionMesaClienteUI.combinacionSeleccionada}">
                                            <div style="font-size:.8rem;color:#999;margin-top:8px;">
                                                Elige un mantel y opcionalmente <strong>un solo extra</strong>
                                                (camino o cubremantel) para ver si existe una combinación registrada.
                                            </div>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{not empty combinacionMesaClienteUI.combinacionSeleccionada}">
                                            <div style="font-size:.8rem;color:#333;margin-top:8px;">
                                                Mostrando la <strong>combinación registrada</strong> para la mesa seleccionada.
                                            </div>
                                        </h:panelGroup>
                                    </h:panelGroup>

                                </p:panel>
                            </p:outputPanel>

                        </h:panelGroup> </h:panelGroup> </div>
            </section>

            <!-- MODAL CARRITO DESPLEGABLE -->
            <p:dialog header="Mi carrito" widgetVar="carritoModal"
                      draggable="false" resizable="false"
                      showEffect="fade" hideEffect="fade"
                      styleClass="custom-cart-modal"
                      closeOnEscape="true"
                      responsive="true" width="350">

                <p:ajax event="close" update=":formRenta:tb-count-group" />

                <h:panelGroup id="modalCarritoContent" layout="block" styleClass="modal-cart-content">


                    <p:outputPanel rendered="#{carritoBean.carrito.vacio}"
                                   style="display:block; text-align:center; padding: 20px 0; font-style: italic;">
                        Tu carrito esta vacio.
                    </p:outputPanel>

                    <p:dataList value="#{carritoBean.carrito.items}" var="item" type="none"
                                styleClass="dl-reset" rendered="#{not carritoBean.carrito.vacio}">
                        <div class="modal-item-row">
                            <p:commandLink actionListener="#{carritoBean.eliminarItem(item)}"
                                           update=":formRenta:modalCarritoContent :formRenta:tb-count-group"
                                           styleClass="modal-btn-remove">
                                <i class="pi pi-minus-circle"/>
                            </p:commandLink>

                            <h:panelGroup rendered="#{empty item.articulo}" styleClass="modal-item-img.placeholder"/>
                            <h:graphicImage rendered="#{not empty item.articulo}"
                                            value="#{articuloUI.getImagenBase64(item.articulo)}"
                                            styleClass="modal-item-img"/>

                            <h:outputText value="#{item.articulo.nombre}" styleClass="modal-item-name"/>

                            <div class="modal-qty-selector">
                                <p:commandLink actionListener="#{carritoBean.decrementarCantidad(item)}"
                                               update=":formRenta:modalCarritoContent :formRenta:tb-count-group"
                                               disabled="#{item.cantidad le 1}">
                                    <i class="pi pi-minus" style="font-size: 0.7rem;"/>
                                </p:commandLink>
                                <p:inputNumber id="modalQtyInput"
                                               value="#{item.cantidad}"
                                               decimalPlaces="0"
                                               minValue="1"
                                               maxValue="#{carritoBean.maxCantidadItem(item)}"
                                               style="width: 50px; text-align:center;">
                                    <p:ajax event="blur"
                                            process="@this"
                                            listener="#{carritoBean.aplicarCantidad(item)}"
                                            update=":formRenta:modalCarritoContent :formRenta:tb-count-group"/>
                                </p:inputNumber>
                                <p:commandLink actionListener="#{carritoBean.incrementarCantidad(item)}"
                                               update=":formRenta:modalCarritoContent :formRenta:tb-count-group">
                                    <i class="pi pi-plus" style="font-size: 0.7rem;"/>
                                </p:commandLink>
                            </div>

                            <h:outputText value="#{item.precioTotal}" styleClass="modal-item-price">
                                <f:convertNumber type="currency" currencySymbol="$" maxFractionDigits="0"/>
                            </h:outputText>

                        </div>
                    </p:dataList>

                    <h:panelGroup layout="block" style="margin-top: 15px; border-top: 2px solid var(--olive); padding-top: 15px;"
                                  rendered="#{not carritoBean.carrito.vacio}">
                        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.1rem; margin-bottom: 15px;">
                            <span>Total:</span>
                            <h:outputText value="#{carritoBean.carrito.total}">
                                <f:convertNumber type="currency" currencySymbol="$" maxFractionDigits="0"/>
                            </h:outputText>
                        </div>
                        <p:button value="Ver Carrito Completo" outcome="/Carrito.xhtml"
                                  styleClass="cta-btn" style="width: 100%;"/>
                    </h:panelGroup>

                </h:panelGroup>
            </p:dialog>

            <!-- DIALOGO FECHA EVENTO  -->
            <p:dialog header="Fecha del Evento" widgetVar="dlgFecha"
                      modal="true" closable="false" resizable="false" draggable="false"
                      visible="#{empty articuloCatalogoUI.fechaSeleccionada}"
                      showEffect="fade" hideEffect="fade" responsive="true" width="400"
                      styleClass="custom-dialog">

                <div style="display:flex; flex-direction:column; gap:20px; align-items:center; text-align:center;">
                    <i class="pi pi-calendar" style="font-size: 3rem; color: var(--olive);"></i>
                    <div>
                        <h3 style="margin:0; color: var(--olive);">¡Hola!</h3>
                        <p style="margin-top:10px; color:#666; font-size:0.95rem; line-height:1.4;">
                            Para mostrarte la disponibilidad exacta de nuestros artículos, necesitamos saber la fecha de tu evento.
                        </p>
                    </div>

                    <div class="center-calendar">
                        <p:datePicker id="fechaInput" value="#{articuloCatalogoUI.fechaSeleccionada}"
                                      pattern="dd/MM/yyyy" showIcon="true" locale="es"
                                      mindate="#{articuloCatalogoUI.now}" readonlyInput="true" placeholder="Selecciona una fecha"/>
                    </div>

                    <p:commandButton value="Confirmar Fecha"
                                     actionListener="#{articuloCatalogoUI.onFechaCambio}"
                                     update=":formRenta:catalogoPrincipal :formRenta:barraFecha :formRenta:msgs"
                                     oncomplete="if (args &amp;&amp; !args.validationFailed) PF('dlgFecha').hide()"
                                     styleClass="dialog-btn" icon="pi pi-check"/>
                </div>
            </p:dialog>

            <footer class="footer">
                <div>
                    <div style="font-weight:700;"><i class="pi pi-briefcase"></i> EVENTOS CAMPESTRE</div>
                    <div>WhatsApp: 6862632183 , 6863120350</div>
                    <div style="opacity:.8;">Copyright ©MoonSoftware · Todos los derechos reservados.</div>
                </div>
                <div>
                    <p:commandButton value="Acerca de" styleClass="p-button-lg cta-btn" process="@this"/>
                </div>
                <div class="footer__right">
                    <div style="font-weight:700; margin-bottom:6px;">UBICACION</div>
                    <div>Mexicali Baja California<br/>Mexico.</div>
                </div>
            </footer>

        </div>
    </h:form>
</h:body>
</html>
